(this.webpackJsonpcelo_voting=this.webpackJsonpcelo_voting||[]).push([[0],{1005:function(e,t){},1105:function(e,t,n){"use strict";n.r(t);var a=n(19),s=n.n(a),i=n(263),c=n.n(i),r=(n(501),n(2)),o=n.n(r),l=n(17),u=n(145),d=n(166),p=n(493),b=n.n(p),j=(n(1102),n(494)),m=n(5);function x(){var e=Object(d.useContractKit)(),t=e.connect,n=e.address,s=e.performActions,i=e.getConnectedKit,c=Object(a.useState)(!1),r=Object(u.a)(c,2),p=r[0],x=r[1],h=Object(a.useState)(0),y=Object(u.a)(h,2),f=y[0],g=y[1],v=Object(a.useState)(0),O=Object(u.a)(v,2),N=O[0],w=O[1],C=Object(a.useState)([]),T=Object(u.a)(C,2),k=T[0],M=T[1],D=Object(a.useState)(null),S=Object(u.a)(D,2),_=S[0],B=S[1],V=function(){var e=Object(l.a)(o.a.mark((function e(){var t,a,s,c,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:return t=e.sent,e.next=5,t.getTotalBalance(n);case 5:a=e.sent,s=a.CELO.shiftedBy(-18).toFixed(2),c=a.cUSD.shiftedBy(-18).toFixed(2),r=new t.web3.eth.Contract(j,"0x3B291b855af8Cb88a64116075C613B887d77f912"),B(r),g(s),w(c);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(o.a.mark((function e(){var t,n,a,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.methods.candidatesLength().call();case 2:for(t=e.sent,n=[],a=function(e){var t=new Promise(function(){var t=Object(l.a)(o.a.mark((function t(n,a){var s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.methods.candidates(e).call();case 2:s=t.sent,n({index:e,name:s[0],party:s[1],voteCount:s[2],creationDate:s[3],expirationDate:s[4]});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());n.push(t)},s=0;s<t;s++)a(s);return e.next=8,Promise.all(n);case 8:i=e.sent,M(i);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(function(){var e=Object(l.a)(o.a.mark((function e(a){var s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log({kit:a}),console.log({address:n}),e.next=4,_.methods.vote(t).send({from:a.defaultAccount});case 4:s=e.sent,console.log({candidate:s}),P();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),console.log({error:e.t0}),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(_)return P()}),[_]),Object(a.useEffect)((function(){Object(l.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!0),n){e.next=4;break}return e.next=4,t();case 4:return e.next=6,i();case 6:return a=e.sent,console.log(a.getWallet()),e.next=10,V();case 10:x(!1);case 11:case"end":return e.stop()}}),e)})))()}),[n]),n?Object(m.jsxs)("div",{children:[Object(m.jsx)("nav",{className:"navbar navbar-light navbar-expand-lg fixed-top bg-secondary text-uppercase",id:"mainNav",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("a",{className:"navbar-brand js-scroll-trigger",href:"#page-top",children:"Celo Vote"}),Object(m.jsx)("button",{className:"navbar-toggler navbar-toggler-right text-uppercase bg-primary text-white rounded","data-toggle":"collapse","data-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(m.jsx)("i",{className:"fa fa-bars"})}),Object(m.jsx)("div",{className:"collapse navbar-collapse",id:"navbarResponsive",children:Object(m.jsxs)("ul",{className:"nav navbar-nav ml-auto",children:[Object(m.jsx)("li",{className:"nav-item mx-0 mx-lg-1",role:"presentation",children:Object(m.jsx)("a",{className:"nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger",href:"#portfolio",children:"Election"})}),Object(m.jsx)("li",{className:"nav-item mx-0 mx-lg-1",role:"presentation",children:Object(m.jsx)("a",{className:"nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger",href:"#about",children:"Account"})})]})})]})}),Object(m.jsxs)("div",{id:"scrollbar",children:[Object(m.jsx)("header",{className:"masthead bg-primary text-white text-center ",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("img",{className:"img-fluid d-block mx-auto mb-5",src:"assets/img/profile.png",alt:"CeloVote"}),p&&Object(m.jsx)("div",{id:"loading-bar-spinner",className:"spinner",children:Object(m.jsx)("div",{className:"spinner-icon"})}),Object(m.jsx)("h1",{children:"Celo Vote"}),Object(m.jsx)("hr",{className:"star-light"}),Object(m.jsx)("h2",{className:"font-weight-light mb-0",children:"Democracy - Voting - Security"})]})}),Object(m.jsxs)("section",{id:"portfolio",className:"portfolio",children:[Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h2",{className:"text-uppercase text-center text-secondary",children:"Candidates"}),Object(m.jsx)("hr",{className:"star-dark mb-5"}),Object(m.jsx)("div",{className:"row",children:k&&k.map((function(e,t){return Object(m.jsx)("div",{className:"col-lg-4",style:{marginBottom:20},children:Object(m.jsxs)("div",{className:"carousel slide","data-ride":"carousel",id:"carousel",children:[Object(m.jsx)("div",{className:"carousel-inner",role:"listbox",children:Object(m.jsx)("div",{className:"carousel-item active",children:Object(m.jsx)("img",{id:"images",className:"w-100 d-block",src:"https://images.pexels.com/photos/4669141/pexels-photo-4669141.jpeg?auto=compress&cs=tinysrgb&h=750&w=1260",alt:e.name,style:{height:400}})})}),Object(m.jsx)("div",{id:"votes",children:Object(m.jsxs)("center",{children:[Object(m.jsxs)("h3",{children:[e.name," "]}),Object(m.jsxs)("h4",{children:[e.party," "]}),Object(m.jsxs)("h5",{children:["Number of Votes : ",e.voteCount," "]})]})}),Object(m.jsx)("center",{children:Object(m.jsx)("div",{children:Object(m.jsx)("button",{className:"btn btn-dark voteBtn",onClick:function(){F(t)},children:"Vote!"})})})]})},t)}))})]}),Object(m.jsx)("div",{id:"body"})]}),Object(m.jsx)("section",{id:"about",className:"bg-primary text-white mb-0",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h2",{className:"text-uppercase text-center text-white",children:"Account"}),Object(m.jsx)("img",{className:"rounded-circle overflow-hidden img-fluid d-block border border-white shadow-sm mx-auto my-3",src:b()(n),alt:n}),Object(m.jsx)("hr",{className:"star-light mb-5"}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-lg-12 ml-auto ",children:Object(m.jsxs)("center",{children:[Object(m.jsxs)("p",{children:["Your address : ",n]})," ",Object(m.jsxs)("p",{children:["Your cUSD balance : ",N]})," ",Object(m.jsxs)("p",{children:["Your Celo balance : ",f]})," "]})})}),Object(m.jsx)("div",{className:"text-center mt-4"})]})})]})]}):Object(m.jsx)("section",{id:"about",className:"bg-primary text-white mb-0",children:Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("h2",{className:"text-uppercase text-center text-white",children:"Celo Vote"}),Object(m.jsx)("hr",{className:"star-light mb-5"}),Object(m.jsx)("div",{className:"row",children:Object(m.jsx)("div",{className:"col-lg-12 ml-auto",children:Object(m.jsxs)("center",{children:[Object(m.jsx)("h1",{children:"Lets get you started on CeloVoting"}),Object(m.jsx)("button",{className:"regBtn btn-primary btn-xl",id:"registerbtn",onClick:function(){t()},children:"Connect!"})]})})})]})})}var h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1108)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),i(e),c(e)}))};c.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(d.ContractKitProvider,{dappName:"CeloVoting",dappDescription:"My Dacade submission",dappUrl:"https://example.com",networks:[d.Alfajores],children:Object(m.jsx)(x,{})})}),document.getElementById("root")),h()},494:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string[]","name":"_candidateNames","type":"string[]"},{"internalType":"string[]","name":"_candidateParty","type":"string[]"},{"internalType":"string","name":"_district","type":"string"},{"internalType":"address","name":"_manager","type":"address"},{"internalType":"uint256","name":"_amountofHours","type":"uint256"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"candidates","outputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"party","type":"string"},{"internalType":"uint256","name":"voteCount","type":"uint256"},{"internalType":"uint256","name":"creationDate","type":"uint256"},{"internalType":"uint256","name":"expirationDate","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"candidatesLength","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getCandidateName","outputs":[{"internalType":"string","name":"name","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getCandidateParty","outputs":[{"internalType":"string","name":"party","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getVoteCount","outputs":[{"internalType":"uint256","name":"voteCount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"manager","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"vote","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"voters","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"votingDistrict","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]')},501:function(e,t,n){},515:function(e,t){},517:function(e,t){},531:function(e,t){},532:function(e,t){},552:function(e,t){},557:function(e,t){},559:function(e,t){},561:function(e,t){},615:function(e,t){},617:function(e,t){},624:function(e,t){},625:function(e,t){},687:function(e,t){},753:function(e,t){},798:function(e,t){},977:function(e,t){}},[[1105,1,2]]]);
//# sourceMappingURL=main.84162e46.chunk.js.map